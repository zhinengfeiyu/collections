##### Unsafe类
- Unsafe类使Java拥有了像C语言的指针一样操作内存空间的能力，官方并不建议使用，如果要用的话需要通过反射拿到它的实例
- 作用1：操作对象属性，`native long objectFieldOffset(Field f)`方法可以获取对象某个属性的内存偏移地址，
    然后可根据偏移地址直接对属性进行修改，而且不是private、protected等修饰符的限制。例如：
        
        Field name = user.getClass().getDeclaredField("name");
        long nameOffset = unsafe.objectFieldOffset(name);
        unsafe.putObject(user, nameOffset, "jim");
        
- 作用2：执行CAS原子操作，即如果对象当前值和期望值一样，那么则将对象的值设置成新值。java内部的atomic包下的AtomicInteger等类，
    都是调用的Unsafe的该操作
    `native boolean compareAndSwapInt(Object o, long offset, int expectedOldValue, int valueToUpdate)`
    参数1是操作的对象，参数2是待操作属性的内存偏移地址，参数3是设置前期望的旧值，如果不是该值，即已被其他线程修改过，
    直接返回修改失败，参数4是改后的新值。
    基于这一操作的返回值，Unsafe提供的很多修改操作，为了保证结果的正确性，都进行了无限循环，例如：
    
        public final int getAndAddInt(Object var1, long var2, int var4) {
            int var5;
            do {
                var5 = this.getIntVolatile(var1, var2);
            } while(!this.compareAndSwapInt(var1, var2, var5, var5 + var4));
        
            return var5;
        }

